name: Build FreeBSD Release

on:
  push:
    branches: ["main"]
    tags:
      - '*'

  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:

permissions:
  contents: write
  pull-requests: write 
  issues: read
  packages: none

jobs:
  build_freebsd:
    runs-on: ubuntu-latest
    name: A job to run FreeBSD
    env:
      MYTOKEN : ${{ secrets.MYTOKEN }}
      MYTOKEN2: "value2"
    steps:
    - uses: actions/checkout@v4
    - name: VM FreeBSD
      id: freebsd_id
      uses: vmactions/freebsd-vm@v1
      with:
        envs: 'MYTOKEN MYTOKEN2'
        usesh: true
        prepare: |
          pkg install -y curl 
          curl https://sh.rustup.rs -sSf | sh -s -- -y

        run: |
          pwd
          ls 
          freebsd-version
          cargo build --release 
          rustup target list
          ls target/release
          
    #- name: list_targets
    #    run:|
    #      rustup target list
    #- name: List binary
    #    run:| 
    #      ls target/release
           
          

          
